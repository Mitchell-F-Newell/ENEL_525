characterA = imread("C:\Users\bosto\Documents\U of C\FALL 2019 & Winter 2020\Fall 2019\ENEL 525\Lab\Lab 3\characters\char1_a.bmp");
charA = double(characterA);
inputA = reshape(charA, 20 * 20,1);
P1 = normc(inputA);

characterB= imread("C:\Users\bosto\Documents\U of C\FALL 2019 & Winter 2020\Fall 2019\ENEL 525\Lab\Lab 3\characters\char1_b.bmp");
charB = double(characterB);
inputB = reshape(charB, 20 * 20,1);
P2 = normc(inputB);

characterC = imread("C:\Users\bosto\Documents\U of C\FALL 2019 & Winter 2020\Fall 2019\ENEL 525\Lab\Lab 3\characters\char1_c.bmp");
charC = double(characterC);
inputC = reshape(charC, 20 * 20,1);
P3 = normc(inputC);

characterD = imread("C:\Users\bosto\Documents\U of C\FALL 2019 & Winter 2020\Fall 2019\ENEL 525\Lab\Lab 3\characters\char1_d.bmp");
charD = double(characterD);
inputD = reshape(charD, 20 * 20,1);
P4 = normc(inputD);

characterE = imread("C:\Users\bosto\Documents\U of C\FALL 2019 & Winter 2020\Fall 2019\ENEL 525\Lab\Lab 3\characters\char1_e.bmp");
charE = double(characterE);
inputE = reshape(charE, 20 * 20,1);
P5 = normc(inputE);

characterF = imread("C:\Users\bosto\Documents\U of C\FALL 2019 & Winter 2020\Fall 2019\ENEL 525\Lab\Lab 3\characters\char1_F.bmp");
charF = double(characterF);
inputF = reshape(charF, 20 * 20,1);
P6 = normc(inputF);

characterG = imread("C:\Users\bosto\Documents\U of C\FALL 2019 & Winter 2020\Fall 2019\ENEL 525\Lab\Lab 3\characters\char1_g.bmp");
charG = double(characterG);
inputG = reshape(charG, 20 * 20,1);
P7 = normc(inputG);

characterH= imread("C:\Users\bosto\Documents\U of C\FALL 2019 & Winter 2020\Fall 2019\ENEL 525\Lab\Lab 3\characters\char1_h.bmp");
charH = double(characterH);
inputH = reshape(charH, 20 * 20,1);
P8 = normc(inputH);

characterI = imread("C:\Users\bosto\Documents\U of C\FALL 2019 & Winter 2020\Fall 2019\ENEL 525\Lab\Lab 3\characters\char1_i.bmp");
charI = double(characterI);
inputI = reshape(charI, 20 * 20,1);
P9 = normc(inputI);

characterJ = imread("C:\Users\bosto\Documents\U of C\FALL 2019 & Winter 2020\Fall 2019\ENEL 525\Lab\Lab 3\characters\char1_j.bmp");
charJ = double(characterJ);
inputJ = reshape(charJ, 20 * 20,1);
P10 = normc(inputJ);

characterK = imread("C:\Users\bosto\Documents\U of C\FALL 2019 & Winter 2020\Fall 2019\ENEL 525\Lab\Lab 3\characters\char1_k.bmp");
charK = double(characterK);
inputK = reshape(charK, 20 * 20,1);
P11 = normc(inputK);

characterL = imread("C:\Users\bosto\Documents\U of C\FALL 2019 & Winter 2020\Fall 2019\ENEL 525\Lab\Lab 3\characters\char1_l.bmp");
charL = double(characterL);
inputL = reshape(charL, 20 * 20,1);
P12 = normc(inputL);

characterM = imread("C:\Users\bosto\Documents\U of C\FALL 2019 & Winter 2020\Fall 2019\ENEL 525\Lab\Lab 3\characters\char1_M.bmp");
charM = double(characterM);
inputM = reshape(charM, 20 * 20,1);
P13 = normc(inputM);

characterN = imread("C:\Users\bosto\Documents\U of C\FALL 2019 & Winter 2020\Fall 2019\ENEL 525\Lab\Lab 3\characters\char1_n.bmp");
charN = double(characterN);
inputN = reshape(charN, 20 * 20,1);
P14 = normc(inputN);

characterO = imread("C:\Users\bosto\Documents\U of C\FALL 2019 & Winter 2020\Fall 2019\ENEL 525\Lab\Lab 3\characters\char1_o.bmp");
charO = double(characterO);
inputO = reshape(charO, 20 * 20,1);
P15 = normc(inputO);

characterP = imread("C:\Users\bosto\Documents\U of C\FALL 2019 & Winter 2020\Fall 2019\ENEL 525\Lab\Lab 3\characters\char1_p.bmp");
charP = double(characterP);
inputP = reshape(charP, 20 * 20,1);
P16 = normc(inputP);

characterQ = imread("C:\Users\bosto\Documents\U of C\FALL 2019 & Winter 2020\Fall 2019\ENEL 525\Lab\Lab 3\characters\char1_q.bmp");
charQ = double(characterQ);
inputQ = reshape(charQ, 20 * 20,1);
P17 = normc(inputQ);

characterR = imread("C:\Users\bosto\Documents\U of C\FALL 2019 & Winter 2020\Fall 2019\ENEL 525\Lab\Lab 3\characters\char1_r.bmp");
charR = double(characterR);
inputR = reshape(charR, 20 * 20,1);
P18 = normc(inputR);

characterS = imread("C:\Users\bosto\Documents\U of C\FALL 2019 & Winter 2020\Fall 2019\ENEL 525\Lab\Lab 3\characters\char1_s.bmp");
charS = double(characterS);
inputS = reshape(charS, 20 * 20,1);
P19 = normc(inputS);

characterT = imread("C:\Users\bosto\Documents\U of C\FALL 2019 & Winter 2020\Fall 2019\ENEL 525\Lab\Lab 3\characters\char1_t.bmp");
charT = double(characterT);
inputT = reshape(charT, 20 * 20,1);
P20 = normc(inputT);

characterU = imread("C:\Users\bosto\Documents\U of C\FALL 2019 & Winter 2020\Fall 2019\ENEL 525\Lab\Lab 3\characters\char1_u.bmp");
charU = double(characterU);
inputU = reshape(charU, 20 * 20,1);
P21 = normc(inputU);

characterV = imread("C:\Users\bosto\Documents\U of C\FALL 2019 & Winter 2020\Fall 2019\ENEL 525\Lab\Lab 3\characters\char1_v.bmp");
charV = double(characterV);
inputV = reshape(charV, 20 * 20,1);
P22 = normc(inputV);

characterW = imread("C:\Users\bosto\Documents\U of C\FALL 2019 & Winter 2020\Fall 2019\ENEL 525\Lab\Lab 3\characters\char1_w.bmp");
charW = double(characterW);
inputW = reshape(charW, 20 * 20,1);
P23 = normc(inputW);

characterX = imread("C:\Users\bosto\Documents\U of C\FALL 2019 & Winter 2020\Fall 2019\ENEL 525\Lab\Lab 3\characters\char1_x.bmp");
charX = double(characterX);
inputX = reshape(charX, 20 * 20,1);
P24 = normc(inputX);

characterY = imread("C:\Users\bosto\Documents\U of C\FALL 2019 & Winter 2020\Fall 2019\ENEL 525\Lab\Lab 3\characters\char1_y.bmp");
charY = double(characterY);
inputY = reshape(charY, 20 * 20,1);
P25 = normc(inputY);

characterZ = imread("C:\Users\bosto\Documents\U of C\FALL 2019 & Winter 2020\Fall 2019\ENEL 525\Lab\Lab 3\characters\char1_z.bmp");
charZ = double(characterZ);
inputZ = reshape(charZ, 20 * 20,1);
P26  = normc(inputZ);

P = [P1 P2 P3 P4 P5 P6 P7 P8 P9 P10 P11 P12 P13 P14 P15 P16 P17 P18 P19 P20 P21 P22 P23 P24 P25 P26];
T = P;

W =  zeros(400, 400);
b = zeros(400, 1);
et = 10E-6;
lr = 0.04;
iter = 1;
MSE(1) = 1;
N = 26;

while MSE(iter) >= et 
    err = zeros(400,26);
    for k=1:N 
        err(:,k) = T(:,k)-W*P(:,k)-b;
        W = W+2*lr*err(:,k)*transpose(P(:,k));
        b = b+2*lr*err(:,k);
    end
    MSE(iter+1) = mse(err);
    iter = iter+1;
end
figure;
semilogy(MSE);

A = W * P + b;
vartype={'double','double','double','double','double','double','double','double'...
    ,'double','double','double','double','double','double','double','double'...
    ,'double','double','double','double','double','double','double','double'...
    ,'double','double',};
CorrTable=table('Size',[26 26],'VariableTypes',vartype,'VariableNames',{'A','B','C','D','E','F','G','H','I'...
    ,'J','K','L','M','N','O','P','Q','R','S','T','U','V'...
    ,'W','X','Y','Z'});
for rownumber=1:26
    for colnumber=1:26
        CorrTable(rownumber,colnumber)={corr2(T(:, colnumber), A(:,rownumber))};
    end
end
CorrTable
figure;

for i=1:26
    subplot(8,8,i);
    imshow(16*reshape(P(:,i),[20,20]));
    subplot(8,8,i+32);
    imshow(16*reshape(A(:,i),[20,20]));
end
